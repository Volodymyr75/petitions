# üìä Petition Analytics ‚Äî Project State

> **–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è**: 2026-01-07
> **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –®–≤–∏–¥–∫–µ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É —Ä–æ–∑–º–æ–≤–∏

---

## üìÖ –°–µ—Å—ñ—è 2026-01-07: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤–µ–ª–∏–∫–æ–≥–æ Backfill
1. **Daily Sync**: –ó—ñ–±—Ä–∞–Ω–æ **+63,351** –≥–æ–ª–æ—Å. 2 –ø–µ—Ç–∏—Ü—ñ—ó –ø–µ—Ä–µ–π—à–ª–∏ –≤ —Å—Ç–∞—Ç—É—Å "–ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ".
2. **Archive Complete**: –ë–∞–∑–∞ –∑—Ä–æ—Å–ª–∞ –¥–æ **95,464** –ø–µ—Ç–∏—Ü—ñ–π. –î—ñ–∞–ø–∞–∑–æ–Ω –¥–æ 257,750 –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ ‚Äî –∞—Ä—Ö—ñ–≤–Ω—ñ –¥–∞–Ω—ñ –∑—ñ–±—Ä–∞–Ω—ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–≤–Ω–æ.
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ë–∞–∑–∞ —Ç–µ–ø–µ—Ä –æ—Ö–æ–ø–ª—é—î –º–∞–π–∂–µ 100% –∑–Ω–∞—á—É—â–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ —Ä–æ–∫–∏.
4. **Deploy**: –§—ñ–Ω–∞–ª—å–Ω–∏–π (–Ω–∞ –¥–∞–Ω–æ–º—É –µ—Ç–∞–ø—ñ) –º–∞—Å–∏–≤ –∞—Ä—Ö—ñ–≤–Ω–∏—Ö –¥–∞–Ω–∏—Ö —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ GitHub.

---

## üöÄ Phase 2: Automation Plan

**–ú–µ—Ç–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ –¥–æ–±–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é —Ç–∞ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è–º–∏.

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
- **Database**: MotherDuck (cloud DuckDB) ‚Äî –±–∞–∑–∞ `petitions_prod`
- **Runner**: GitHub Actions (cron: 04:00 UTC / 06:00 Kyiv)
- **Notifications**: Telegram + GitHub Issues

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª | –û–ø–∏—Å |
|-----------|------|------|
| –í–∞–ª—ñ–¥–∞—Ü—ñ—è | `validator.py` | Pre-flight (5 –º–∞—Ä–∫–µ—Ä–Ω–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π) + Post-sync –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ |
| –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è | `notifier.py` | Telegram –∞–ª–µ—Ä—Ç–∏ + GitHub Issue –∑ –ª–æ–≥–∞–º–∏ |
| –ë–µ–∫–∞–ø | SQL –≤ workflow | `CREATE TABLE backup AS SELECT...` –ø–µ—Ä–µ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—î—é |
| Workflow | `daily_sync.yml` | GitHub Actions –∑ rollback –ª–æ–≥—ñ–∫–æ—é |

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∏ (Sanity Checks)
- `votes > 0` –¥–ª—è –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π
- `status != 'Unknown'`
- `text_length > 0`
- Error rate < 20%

### GitHub Secrets
- `MOTHERDUCK_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω MotherDuck
- `TELEGRAM_BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
- `TELEGRAM_CHAT_ID` ‚Äî ID —á–∞—Ç—É

---

## üìÖ –°–µ—Å—ñ—è 2026-01-03: –ú–∞—Å—à—Ç–∞–±–Ω–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É
1. **Daily Sync**: –ó—ñ–±—Ä–∞–Ω–æ **+55,823** –≥–æ–ª–æ—Å—ñ–≤! –î–æ–¥–∞–Ω–æ **13** –Ω–æ–≤–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞.
2. **Backfill**: –ì—ñ–≥–∞–Ω—Ç—Å—å–∫–∏–π –ø—Ä–∏—Ä—ñ—Å—Ç ‚Äî –±–∞–∑–∞ –∑—Ä–æ—Å–ª–∞ –¥–æ **83,951** –ø–µ—Ç–∏—Ü—ñ–π (–¥–æ–¥–∞–Ω–æ –¥—ñ–∞–ø–∞–∑–æ–Ω 120,000‚Äì153,800).
3. **Data Integrity**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ 10 —Ä–∞–Ω–¥–æ–º–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –∑ –Ω–æ–≤–æ–≥–æ –¥—ñ–∞–ø–∞–∑–æ–Ω—É –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞ –ø–æ–≤–Ω—É –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å (–∞–≤—Ç–æ—Ä–∏, –Ω–æ–º–µ—Ä–∏, —Ç–µ–∫—Å—Ç ‚Äî –≤—Å–µ –æ–∫).
4. **Deploy**: –û–Ω–æ–≤–ª–µ–Ω–æ –∞–Ω–∞–ª—ñ—Ç–∏–∫—É —Ç–∞ —Å—Ç–∞–Ω –ø—Ä–æ–µ–∫—Ç—É.

---

## üìÖ –°–µ—Å—ñ—è 2026-01-02: –î–∏–Ω–∞–º—ñ—á–Ω–∏–π —Ä—ñ—Å—Ç —Ç–∞ –±–µ–∑–ø–µ–∫–∞ –¥–∞–Ω–∏—Ö
1. **Daily Sync**: –ó—ñ–±—Ä–∞–Ω–æ **+48,193** –≥–æ–ª–æ—Å—ñ–≤ (–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç + –ö–∞–±–º—ñ–Ω). –î–æ–¥–∞–Ω–æ **7** –Ω–æ–≤–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π –ö–∞–±–º—ñ–Ω—É.
2. **Backfill**: –ë–∞–∑–∞ –∑—Ä–æ—Å–ª–∞ –¥–æ —Ä–µ–∫–æ—Ä–¥–Ω–∏—Ö **77,039** –ø–µ—Ç–∏—Ü—ñ–π.
3. **Data Security**: –û–Ω–æ–≤–ª–µ–Ω–æ `.gitignore` –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (`*.duckdb*`) –∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é.
4. **Deploy**: –ê–∫—Ç—É–∞–ª—å–Ω–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ GitHub.

---

## üìÖ –°–µ—Å—ñ—è 2026-01-01: –ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ —Ä–æ–∫—É —Ç–∞ –≤–µ–ª–∏–∫–∏–π Backfill
1. **Daily Sync**: –£—Å–ø—ñ—à–Ω–æ –≤–∏–∫–æ–Ω–∞–Ω–æ –ø–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫ —É 2026 —Ä–æ—Ü—ñ. –ó—ñ–±—Ä–∞–Ω–æ **+24,203** –≥–æ–ª–æ—Å—ñ–≤.
2. **Backfill**: –ó–∞–≤–¥—è–∫–∏ –∞–∫—Ç–∏–≤–Ω—ñ–π —Ä–æ–±–æ—Ç—ñ –±–∞–∑–∞ –∑—Ä–æ—Å–ª–∞ –¥–æ **62,809** –ø–µ—Ç–∏—Ü—ñ–π (–¥–æ–¥–∞–Ω–æ —Ç–∏—Å—è—á—ñ –∞—Ä—Ö—ñ–≤–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤).
3. **Data Integrity**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–∞–Ω–¥–æ–º–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ (60k-68k) –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏–ª–∞ 100% —è–∫—ñ—Å—Ç—å: –∞–≤—Ç–æ—Ä–∏ —Ç–∞ —Ç–µ–∫—Å—Ç (text_length > 0) –Ω–∞ –º—ñ—Å—Ü—ñ.
4. **Deploy**: –û–Ω–æ–≤–ª–µ–Ω–æ `analytics_data.json` —Ç–∞ –∑–∞—Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ —Å—Ç–∞–Ω —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.

---

## üìÖ –°–µ—Å—ñ—è 2025-12-26

**–ó—Ä–æ–±–ª–µ–Ω–æ:**
- ‚úÖ **Cabinet sync** ‚Äî –æ–Ω–æ–≤–ª–µ–Ω–æ 5,360 –ø–µ—Ç–∏—Ü—ñ–π, —Ç–æ–ø –¥–µ–ª—å—Ç–∞: ID 9010 (+87 –≥–æ–ª–æ—Å—ñ–≤)
- ‚úÖ **–û—á–∏—Å—Ç–∫–∞ –±–∞–∑–∏** ‚Äî –≤–∏–¥–∞–ª–µ–Ω–æ 137 —Å–º—ñ—Ç—Ç—î–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ (title = "404. –¢–∞–∫–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –Ω–µ —ñ—Å–Ω—É—î")
- ‚úÖ **smart_complete.py** ‚Äî –¥–æ–¥–∞–Ω–æ retry –ª–æ–≥—ñ–∫—É (3 —Å–ø—Ä–æ–±–∏ –∑ –ø–∞—É–∑–∞–º–∏ 30/60/90—Å –¥–ª—è timeout)
- ‚úÖ **–ù–æ–≤—ñ –ø–µ—Ç–∏—Ü—ñ—ó** ‚Äî –¥–æ–¥–∞–Ω–æ 21 –Ω–æ–≤–∏—Ö (ID 257400-257700)
- ‚úÖ **–ü–ª–∞–Ω —Ä–µ–¥–∏–∑–∞–π–Ω—É –¥–∞—à–±–æ—Ä–¥—É** ‚Äî –∑–∞—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ 4-–±–ª–æ–∫–æ–≤—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É

**–ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –±–∞–∑–∏:** 45,254 president + 5,360 cabinet = **50,614 –ø–µ—Ç–∏—Ü—ñ–π**

---

## üìÖ –°–µ—Å—ñ—è 2025-12-28

**–ó—Ä–æ–±–ª–µ–Ω–æ:**
- ‚úÖ **Fix Scraper** ‚Äî –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –≤ `scraper_detail.py` (—Å–∞–π—Ç –∑–º—ñ–Ω–∏–≤ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –≥–æ–ª–æ—Å–∏ –ø–æ–≤–µ—Ä—Ç–∞–ª–∏ 0)
- ‚úÖ **Daily Sync Success** ‚Äî —É—Å–ø—ñ—à–Ω–∏–π –∑–∞–ø—É—Å–∫ `daily_sync.py`: +169,522 –Ω–æ–≤–∏—Ö –≥–æ–ª–æ—Å—ñ–≤, –æ–Ω–æ–≤–ª–µ–Ω–æ —Å—Ç–∞—Ç—É—Å–∏ 554 –ø–µ—Ç–∏—Ü—ñ–π
- ‚úÖ **DB Maintenance** ‚Äî –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–æ –±–∞–∑—É –∑ –±–µ–∫–∞–ø—É, —Å—Ç–≤–æ—Ä–µ–Ω–æ –Ω–æ–≤–∏–π backup (`petitions.duckdb.bak_latest`)
- ‚úÖ **Dashboard Redesign** ‚Äî –ø–æ–≤–Ω–∏–π —Ä–µ–¥–∏–∑–∞–π–Ω `src/Dashboard.jsx` (Slate/Emerald theme, Sparklines, Progress Bars)
- ‚úÖ **Pipeline Update** ‚Äî `pipeline.py` —Ç–µ–ø–µ—Ä –¥–æ–¥–∞—î `history` (7 –¥–Ω—ñ–≤) —É JSON –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

**–°—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏:**
- Frontend: Build —É—Å–ø—ñ—à–Ω–∏–π, Sparklines –ø—Ä–∞—Ü—é—é—Ç—å
- Backend: Scraper –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ, 0 errors
- Data: `analytics_data.json` –º—ñ—Å—Ç–∏—Ç—å —ñ—Å—Ç–æ—Ä—ñ—é –∑–∞ 7 –¥–Ω—ñ–≤

---

## üìÖ –°–µ—Å—ñ—è 2025-12-30: Backfill —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
1. **Backfill**:
   - –ü–∞–∫–µ—Ç 1: +16 –Ω–æ–≤–∏—Ö –∑–∞ –≥—Ä–∞—Ñ—ñ–∫–æ–º Discovery (30.12).
   - –ü–∞–∫–µ—Ç 2: +1892 –∞—Ä—Ö—ñ–≤–Ω—ñ –ø–µ—Ç–∏—Ü—ñ—ó (ID 40001-45000).
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞: –í—Å—ñ –∑–∞–ø–∏—Å–∏ –º–∞—é—Ç—å –º–µ—Ç–∞–¥–∞–Ω—ñ —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω–∏–π `text_length`.
2. **–ó–∞–≥–∞–ª—å–Ω–∏–π —Ä—ñ—Å—Ç**: +1913 –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –∑–∞ —Å—å–æ–≥–æ–¥–Ω—ñ.
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ë–∞–∑–∞ —Ç–µ–ø–µ—Ä –Ω–∞–ª—ñ—á—É—î –±–ª–∏–∑—å–∫–æ **47,950** –∑–∞–ø–æ–≤–Ω–µ–Ω–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π.
4. **JSON**: –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–∞.

---

## üìÖ –°–µ—Å—ñ—è 2025-12-29: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–±–æ—Ä—É —Ç–µ–∫—Å—Ç—ñ–≤ —Ç–∞ backfill
1. **–ó–º—ñ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Å–∞–π—Ç—É –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞**: –í–∏—è–≤–ª–µ–Ω–æ, —â–æ —Ç–µ–∫—Å—Ç –ø–µ—Ç–∏—Ü—ñ—ó –ø–µ—Ä–µ—ó—Ö–∞–≤ –∑ `article.article` –¥–æ `#pet-tab-1`. –¶–µ —Å–ø—Ä–∏—á–∏–Ω–∏–ª–æ –∑–∞–ø–∏—Å `text_length = 0` –¥–ª—è –Ω–æ–≤–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π.
2. **–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è —Å–∫—Ä–∞–ø–µ—Ä–∞**: –û–Ω–æ–≤–ª–µ–Ω–æ `etl/scraper_detail.py` (–Ω–æ–≤–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä) —Ç–∞ `etl/daily_sync.py` (–∞–≤—Ç–æ-–≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–≤–∂–∏–Ω–∏ —Ç–µ–∫—Å—Ç—É –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ).
3. **Data Backfill**:
   - –ü–∞–∫–µ—Ç 1: +28 –ø–µ—Ç–∏—Ü—ñ–π (ID 1-1000).
   - –ü–∞–∫–µ—Ç 2: +343 –ø–µ—Ç–∏—Ü—ñ—ó (ID 1001-10000).
   - –ü–∞–∫–µ—Ç 3: +242 –ø–µ—Ç–∏—Ü—ñ—ó (ID 10001-20000).
   - –ü–∞–∫–µ—Ç 4: +172 –ø–µ—Ç–∏—Ü—ñ—ó (ID 20001-25000).
   - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ `text_length` –¥–ª—è –≤—Å—ñ—Ö –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ (—Ç–µ–ø–µ—Ä –≤—Å—é–¥–∏ > 0).
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ë–∞–∑–∞ —Ç–µ–ø–µ—Ä –Ω–∞–ª—ñ—á—É—î –ø–æ–Ω–∞–¥ 46,050 –∑–∞–ø–æ–≤–Ω–µ–Ω–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π.
5. **–ë–µ–∑–ø–µ–∫–∞**: –°—Ç–≤–æ—Ä–µ–Ω–æ —Å–≤—ñ–∂–∏–π –±–µ–∫–∞–ø –±–∞–∑–∏ `petitions.duckdb.bak_20251229_latest`.

---

## üé® –†–µ–¥–∏–∑–∞–π–Ω –¥–∞—à–±–æ—Ä–¥—É (–ü–õ–ê–ù)

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ 4 –±–ª–æ–∫—ñ–≤

| –ë–ª–æ–∫ | –ó–º—ñ—Å—Ç |
|------|-------|
| **1. Overview** | 4 KPI (total, success rate, median votes, response rate) + platform split |
| **2. Daily Dynamics** | +–Ω–æ–≤–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π, +–≥–æ–ª–æ—Å—ñ–≤, biggest movers (—Ç–æ–ø –ø–æ –¥–µ–ª—å—Ç–∞—Ö), 7-day sparkline |
| **3. Deep Analytics** | Histogram votes, timeline (stacked area by month), scatter text_length vs votes |
| **4. Pipeline Info** | Architecture diagram, tech stack, data freshness, "AI Agent coming soon" |

### –ù–æ–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ (–ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏)

```sql
-- –©–æ–¥–µ–Ω–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –±–ª–æ–∫—É 2
CREATE TABLE daily_stats (
    date DATE PRIMARY KEY,
    president_new INTEGER,
    cabinet_new INTEGER,
    total_votes_delta INTEGER,
    status_changes JSON
);

-- –Ü—Å—Ç–æ—Ä—ñ—è –≥–æ–ª–æ—Å—ñ–≤ –¥–ª—è sparklines (–º–∞–π–±—É—Ç–Ω—î)
CREATE TABLE votes_history (
    petition_id VARCHAR,
    source VARCHAR,
    date DATE,
    votes INTEGER,
    PRIMARY KEY (petition_id, source, date)
);
```

### ‚ö†Ô∏è –í—ñ–¥–æ–º—ñ –ø—Ä–æ–±–ª–µ–º–∏

| –ü—Ä–æ–±–ª–µ–º–∞ | –î–µ—Ç–∞–ª—ñ | –°—Ç–∞—Ç—É—Å |
|----------|--------|--------|
| `has_answer` –±–∞–≥ | 100% president –ø–µ—Ç–∏—Ü—ñ–π –º–∞—é—Ç—å `true`. –†—ñ—à–µ–Ω–Ω—è: —ñ–≥–Ω–æ—Ä—É—î–º–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `status='–ó –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é'` | üü° –Ü–≥–Ω–æ—Ä—É—î–º–æ |
| ~~–†—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –¥–∞—Ç~~ | –î–æ–¥–∞–Ω–æ –ø–æ–ª–µ `date_normalized` (DATE), –∫–æ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–æ 100% –∑–∞–ø–∏—Å—ñ–≤ | ‚úÖ –í–∏—Ä—ñ—à–µ–Ω–æ |

---


## üéØ –ú–µ—Ç–∞ –ø—Ä–æ–µ–∫—Ç—É

–ê–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏–π –¥–∞—à–±–æ—Ä–¥ –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π (–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç + –ö–∞–±–º—ñ–Ω) –∑:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –∑–±–æ—Ä–æ–º –¥–∞–Ω–∏—Ö
- –©–æ–¥–µ–Ω–Ω–∏–º–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º–∏
- –¢—Ä–µ–Ω–¥–∞–º–∏ —Ç–∞ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è–º–∏

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
petition/
‚îú‚îÄ‚îÄ etl/                    # Data pipeline —Å–∫—Ä–∏–ø—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ pipeline.py         # –û—Å–Ω–æ–≤–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω (scrape ‚Üí DB ‚Üí JSON)
‚îÇ   ‚îú‚îÄ‚îÄ scraper_president.py
‚îÇ   ‚îú‚îÄ‚îÄ scraper_cabinet.py
‚îÇ   ‚îú‚îÄ‚îÄ smart_complete.py   # –†–æ–∑—É–º–Ω–µ –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ backfill_*.py       # –ë–µ–∫—Ñ—ñ–ª —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ fix_cabinet_*.py    # –§—ñ–∫—Å–∏ –¥–ª—è Cabinet API
‚îú‚îÄ‚îÄ src/                    # React Dashboard
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.jsx       # –û—Å–Ω–æ–≤–Ω–∏–π UI (KPI, charts, trending)
‚îÇ   ‚îî‚îÄ‚îÄ analytics_data.json # –î–∞–Ω—ñ –¥–ª—è –¥–∞—à–±–æ—Ä–¥—É
‚îú‚îÄ‚îÄ petitions.duckdb        # DuckDB –±–∞–∑–∞ (~27MB)
‚îî‚îÄ‚îÄ netlify/                # Deployment –∫–æ–Ω—Ñ—ñ–≥–∏
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (DuckDB)

### –¢–∞–±–ª–∏—Ü—ñ
| –¢–∞–±–ª–∏—Ü—è | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å |
|---------|--------|------|
| `petitions` | ‚úÖ –Ñ | +`votes_previous`, `updated_at`, `date_normalized` |
| `votes_history` | ‚úÖ –Ñ | –Ü—Å—Ç–æ—Ä—ñ—è –≥–æ–ª–æ—Å—ñ–≤ –¥–ª—è sparklines |
| `daily_stats` | ‚úÖ –Ñ | –ê–≥—Ä–µ–≥–æ–≤–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –¥–æ–±—É |

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ petitions (2025-12-26)
| source | status | count |
|--------|--------|-------|
| president | –¢—Ä–∏–≤–∞—î –∑–±—ñ—Ä –ø—ñ–¥–ø–∏—Å—ñ–≤ | 533 |
| president | –ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ | 1,401 |
| president | –ó –≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é | 1,252 |
| president | –ê—Ä—Ö—ñ–≤ | 42,044 |
| cabinet | Answered | 50 |
| cabinet | Approved | 190 |
| cabinet | Unsupported | 5,117 |

**–í—Å—å–æ–≥–æ:** ~50,700 –ø–µ—Ç–∏—Ü—ñ–π

---

## ‚úÖ –©–æ –≤–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ

1. **ETL Pipeline** (`pipeline.py`)
   - –°–∫—Ä–∞–ø—ñ–Ω–≥ –ø—Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—å–∫–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π (active, in_process, processed, archive)
   - –°–∫—Ä–∞–ø—ñ–Ω–≥ –∫–∞–±–º—ñ–Ω—ñ–≤—Å—å–∫–∏—Ö –ø–µ—Ç–∏—Ü—ñ–π —á–µ—Ä–µ–∑ API
   - –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –¥–µ–ª—å—Ç –≥–æ–ª–æ—Å—ñ–≤ (trending)
   - –ï–∫—Å–ø–æ—Ä—Ç –≤ `analytics_data.json`


2. **Dashboard** (`Dashboard.jsx`)
   - ‚úÖ –†–µ–¥–∏–∑–∞–π–Ω –Ω–∞ 4 –±–ª–æ–∫–∏ (Overview, Daily, Analytics, Pipeline)
   - ‚úÖ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è Recharts (Histogram, AreaChart, ScatterChart)
   - ‚úÖ KPI —Ç–∞ Insight –±–ª–æ–∫–∏

3. **–î–∞–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω—ñ**
   - `analytics_data.json` –æ–Ω–æ–≤–ª–µ–Ω–æ –ø—ñ–¥ –Ω–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É (2025-12-26)
   - DB Schema: +`votes_history`, `daily_stats`, `date_normalized`

---

## üöß –©–æ –≤ –ø—Ä–æ—Ü–µ—Å—ñ / –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

### TODO:
- [x] –û–Ω–æ–≤–∏—Ç–∏ `Dashboard.jsx` (4 –±–ª–æ–∫–∏ + Sparklines + Redesign)
- [x] –û–Ω–æ–≤–∏—Ç–∏ `pipeline.py` (JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + History)
- [x] –û–Ω–æ–≤–∏—Ç–∏ —Å—Ö–µ–º—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- [x] –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ script `daily_sync.py` –¥–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è `daily_stats`
- [x] –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ `scraper_detail.py` (–ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –Ω–æ–≤–æ–≥–æ HTML)
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ (cron / GitHub Actions)
- [ ] –î–æ–¥–∞—Ç–∏ OpenAI/LLM –¥–ª—è —á–∞—Ç-–±–æ—Ç–∞
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—Å–∫ (cron / GitHub Actions)
- [ ] –î–æ–¥–∞—Ç–∏ –¥–∞–Ω–∏—Ö –ø—Ä–æ "–ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ" ‚Äî days pending

---

## üîß –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

```bash
# ETL Pipeline
cd etl && python pipeline.py

# Dev server
npm run dev

# Build
npm run build
```

---

## üí° –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```python
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–∞–∑–∏
import duckdb
conn = duckdb.connect('petitions.duckdb')
print(conn.execute("SELECT source, status, COUNT(*) FROM petitions GROUP BY source, status").fetchdf())

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—å
print(conn.execute("SHOW TABLES").fetchall())
```

---

## üìù –ù–æ—Ç–∞—Ç–∫–∏

- Cabinet API —ñ–Ω–æ–¥—ñ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–µ–ø–æ–≤–Ω—ñ –¥–∞–Ω—ñ (author = null)
- –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç—Å—å–∫—ñ –ø–µ—Ç–∏—Ü—ñ—ó –º–∞—é—Ç—å —Ä—ñ–∑–Ω—ñ —Ñ–æ—Ä–º–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å—ñ–≤ (—É–∫—Ä.)
- –î–µ—è–∫—ñ —Å—Ç–∞—Ä—ñ –ø–µ—Ç–∏—Ü—ñ—ó –º–∞—é—Ç—å `status = 'Unknown'`
